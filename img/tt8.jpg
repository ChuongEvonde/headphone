:"query",name:{kind:"Name",value:"broadcastLayout"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"teamsCallId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"broadcastLayout"},arguments:[{kind:"Argument",name:{kind:"Name",value:"teamsCallId"},value:{kind:"Variable",name:{kind:"Name",value:"teamsCallId"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"client"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"broadcastLayout"}}]}}]}},...I.uk.definitions]};var B,T,P,N=a(107844);!function(e){e[e.Local=0]="Local",e[e.Remote=1]="Remote"}(B||(B={})),function(e){e.InProgress="InProgress",e.Success="Success",e.Fail="Fail",e.None="None"}(T||(T={})),function(e){e.Start="Start",e.Stop="Stop"}(P||(P={}));const f={actionGesture:N.uS.click,actionScenarioType:N.Yu.broadcast,panelRegion:N.Ai.main,panelType:N.wh.BroadcastProducerScreen,threadType:N.Th.BroadcastMeeting},L="CM_LOCALCACHE";var E=a(150880),w=a(441454),A=a(625193),D=a(948192),F=a(607581),O=a(660567),V=a(554491),M=a(303488),x=a(806252),R=a(195038),j=a(285148),$=a(53068),z=a(370975),W=a(309056),K=a(624667),J=a(378492),q=a(30459),H=a(892891),Q=a(772563),G=a(717330),X=a(895675);const U=e=>{const t=i.createRef(),{teamsCallId:a,sourceType:n,streamType:r,setAriaLabel:o,isStreamOn:s,itemId:l,renderLayoutItem:c,itemPosition:d,callingIntentId:m,isDisabled:p,isSourcePickerItem:g,vars:v}=e,S=(0,w.Cq)(),k=["producerPreviewItemContainer"];return p&&k.push("isProducerSourcePickerPreviewItemFooterDisabled"),g&&k.push("isBroadcastSourcePicker"),i.createElement(u.k,{fill:!0,hAlign:"center",vAlign:"center",variables:v("broadcast",k),"data-tid":"broadcast-producer-preview-item"},r===R.StreamType.Video&&!s&&i.createElement(Y,Object.assign({},e)),n===B.Local&&s&&((e,t,a,n,r,o)=>(o&&o(r.stringTranslate("broadcast","broadcast_myself_video_aria_label")),i.createElement(K.uU,{teamsCallId:e,expandedContainerRef:t,streamType:n,ignoreMirroring:!0,callingIntentId:a,scalingMode:X.G.VideoRenderer.ScalingMode.Fit,hideCameraSwitch:!0})))(a,t,m,r,S,o),n===B.Remote&&s&&l&&c&&i.createElement(q.x,{variables:v("broadcast",["producerPreviewItemContainer"])},c(l,{onLayoutItemClicked:H.noop,callType:G.rf.Conference,position:d||Q.t.BroadcastSourcePicker,scalingMode:X.G.VideoRenderer.ScalingMode.Fit,setAriaLabel:o})))},Y=i.memo((e=>{const{participantMri:t,vars:a}=e;return t?i.createElement(u.k,{column:!0,padding:"padding.medium",variables:a("broadcast",["broadcastAvatarPreviewSection"]),"data-tid":"participant-avatar"},i.createElement(J.V,{userId:t,isFocusable:!1,hidePersonaCard:!0,shouldAllowContextMenu:!0})):null}));Y.displayName="ParticipantAvatar";var Z=a(860467),ee=a(407006);const te=i.memo((e=>{const{currentSection:t,activeSectionId:a,selectBroadcastSection:n,clearBroadcastSource:r,teamsCallId:o,isVideoOn:l,isScreenSharingOn:c,callingIntentId:d,shouldBeActivated:m,rtmpInProperties:p}=e,{recordPanelAction:g,createDatabag:v}=(0,ee.It)(),{supportedStreamTypes:S,source:k,id:b}=t,y=a===t.id,{vars:h}=(0,s.L)(),C=i.useContext(w.OO);i.useEffect((()=>{m&&n(b)}),[b,n,m]);const I=(null==p?void 0:p.rtmpEnabled)||!1,_=i.useMemo((()=>{const e=S.indexOf(R.BroadcastStreamType.ScreenSharing)>=0,t=S.indexOf(R.BroadcastStreamType.Video)>=0;return I?C.translate("broadcast","broadcast_stage_layout_select_rtmpIn_source"):e&&t?C.translate("broadcast","broadcast_stage_layout_add_video_content"):e?C.translate("broadcast","broadcast_stage_layout_add_content"):C.translate("broadcast","broadcast_stage_layout_add_video")}),[C,S,I]),B=i.useCallback((()=>{const e=S.indexOf(R.BroadcastStreamType.ScreenSharing)>=0,t=S.indexOf(R.BroadcastStreamType.Video)>=0,a=v();a.callId=o,g(e&&t?Object.assign(Object.assign({},f),{actionScenario:N.Tk.selectSingleLayout,actionOutcome:N.$K.select,moduleName:N.rA.singleLayout,dataBag:a}):e?Object.assign(Object.assign({},f),{actionScenario:N.Tk.selectTwoLargeLeftLayout,actionOutcome:N.$K.select,moduleName:N.rA.twoLargeLeftLayoutContent,dataBag:a}):Object.assign(Object.assign({},f),{actionScenario:N.Tk.selectTwoLargeLeftLayout,actionOutcome:N.$K.select,moduleName:N.rA.twoLargeLeftLayoutVideo,dataBag:a})),n(b)}),[S,v,o,n,b,g]),{getItems:T,layoutObservable:P}=(0,W.au)();let L,E=!1;k&&(L=ne(k,T),E=ae(k,l,c,L),E||r(b)),i.useEffect((()=>{const e=P.pipe((0,Z.h)((e=>e.id===(L&&L.id)))).subscribe((e=>{(null==e?void 0:e.isVideoOn)||!1||r(b)}));return()=>{e.unsubscribe()}}),[P,L,r,b]);const A=[y?"activeBroadcastSection":"inactiveBroadcastSection"],D=t.type!==R.BroadcastSectionType.Single;return D&&A.push("isBroadcastStageDualLayoutSection"),i.createElement(u.k,{variables:h("broadcast",A),fill:!0,hAlign:"center",vAlign:"center",onClick:B,"data-tid":"broadcast-producer-layout-section","data-section":t.type,as:D?"button":"div"},k?i.createElement(ie,{teamsCallId:o,isStreamOn:E,source:k,callingIntentId:d,itemId:L&&L.id||void 0}):i.createElement(F.x,{content:_,size:"large",align:"center"}))}));te.displayName="BroadcastProducerLayoutSection";const ae=(e,t,a,n)=>{let i=!1;return e&&(i=e.isLocal?e.type===R.BroadcastStreamType.ScreenSharing?a:t:(null==n?void 0:n.isVideoOn)||!1),i},ne=(e,t)=>{let a;return!e||e.isLocal||(a=e.type===R.BroadcastStreamType.ScreenSharing?t().find((({participantId:t,isScreenShare:a})=>t===e.participantMri&&!!a)):t().find((({participantId:t,isVideoOn:a})=>t===e.participantMri&&!!a))),a},ie=i.memo((e=>{const{teamsCallId:t,callingIntentId:a,source:n,isStreamOn:r,itemId:o}=e,{renderLayoutItem:l}=(0,W.au)(),{vars:c}=(0,s.L)();return i.createElement(U,{teamsCallId:t,isStreamOn:r,sourceType:n.isLocal?B.Local:B.Remote,streamType:n.type===R.BroadcastStreamType.ScreenSharing?R.StreamType.ScreenSharing:R.StreamType.Video,participantMri:n.participantMri||void 0,itemId:o,renderLayoutItem:l,itemPosition:Q.t.BroadcastStage,callingIntentId:a,vars:c})}));ie.displayName="BroadcastLayoutPreviewSection";const re=i.memo((({labelText:e})=>{const{vars:t}=(0,s.L)();return i.createElement(u.k,{column:!0,fill:!0,hAlign:"center",vAlign:"center",variables:t("broadcast",["broadcastProducerLoadingOverlay"]),"data-tid":"broadcast-producer-loading-overlay"},i.createElement(l.aN,null),i.createElement(F.x,{align:"center",weight:"semilight",size:"large",content:e,variables:t("broadcast",["broadcastProducerLoadingMessage"])}))}));re.displayName="BroadcastProducerLoadingOverlay";const oe=i.memo((({i18n:e,participants:t,disable:a,isForLivePreview:n,users:r})=>{const o=i.useContext(E.Vo);if(a){if(n){const t=e.stringTranslate("broadcast","live_preview_no_one_sharing");o.announce(t)}return null}{const a=((e,t)=>{if(!e||e.length!==t.length)return[...t];const a=[];return t.forEach(((t,n)=>{var i;a.push(Object.assign(Object.assign({},t),{displayName:(null==t?void 0:t.displayName)||(null===(i=e[n])||void 0===i?void 0:i.displayName)}))})),a})(r,t).reduce(((t,a)=>(a.isScreenShareLive&&t.push(e.stringTranslate("broadcast","broadcast_statusMessage_desktop",{sourceName:a.displayName||""})),a.isVideoLive&&t.push(a.displayName||""),t)),[]);let s="";return s=1===a.length?n?e.stringTranslate("broadcast","broadcast_livePreview_statusMessage",{source:a[0]}):a[0]:n?e.stringTranslate("broadcast","broadcast_livePreviewMessage_multipleSources",{source1:a[0],source2:a[1]}):e.stringTranslate("broadcast","broadcast_statusMessage_multipleSources",{source1:a[0],source2:a[1]}),n&&o.announce(s),i.createElement(F.x,{"data-tid":"broadcast-producer-status-message",content:s})}}));oe.displayName="BroadcastProducerStatusMessage";var se=a(134056),le=a(931147);const ce=i.memo((e=>{const{host:t,logger:a,coachmarkType:n,delay:r,setCoachmarkFlag:o}=e,s=(0,S.__rest)(e,["host","logger","coachmarkType","delay","setCoachmarkFlag"]),[l,c]=i.useState(!1),d=i.useRef(null);return i.useEffect((()=>{if(!l&&null===d.current){let e=0;r&&r>0&&(e=r),d.current=t.setTimeout((()=>{c(!0)}),e)}return function(){d.current&&t.clearTimeout(d.current)}}),[t,r,l]),i.useEffect((()=>{let e;return l&&(e=t.setTimeout((()=>{c(!1),o(n)}),7e3)),()=>{e&&t.clearTimeout(e)}}),[t,n,o,l]),i.useEffect((()=>()=>{o(n),c(!1)}),[n,o]),i.createElement(A.u,Object.assign({},s,{open:l,align:"center",content:{content:e.content,variables:{isBroadcastCoachmarkTooltip:!0}},trigger:e.trigger,position:e.position,accessibility:e.accessibility}))}));function de(e,t){let a=[];try{a=JSON.parse(e)}catch(a){t.error(`Could not parse coachmark cache: ${e}`)}return a}ce.displayName="BroadcastCoachmarkRenderer";const me=i.memo((e=>{const{coachmarkType:t,condition:a}=e,n=(0,S.__rest)(e,["coachmarkType","condition"]),{host:r,localStorageService:o}=(0,se.SE)(),s=(0,le.w)("BroadcastCoachmark"),[l,c]=i.useState(!1),d=i.useMemo((()=>{if(o){const e=o.get(L);if(!e)return!1;return de(e,s).includes(t)}return!1}),[o,s,t]),m=i.useCallback((e=>{if(o){const t=o.get(L);let a=[];t&&(a=de(t,s)),a.includes(e)||a.push(e),o.set(L,JSON.stringify(a)),c(!0)}}),[o,s]);return d||!a||l?i.createElement(i.Fragment,null,e.trigger):i.createElement(ce,Object.assign({coachmarkType:t,host:r,logger:s,setCoachmarkFlag:m},n))}));me.displayName="BroadcastCoachmarkContainer";var ue=a(279e3);class pe extends i.PureComponent{constructor(){super(...arguments),this.isWaitingScenarioCompleted=!1,this.waitingForSetLayoutTimeoutId=null,this.disableSendLiveButton=()=>{const{isSetLayoutCommandAvailable:e,broadcastLayout:t,sendToBroadcastStatus:a}=this.props,n=!t.sections.find((e=>!e.source)),i=e&&n,r=a===T.InProgress;return this.isPostLive()||!i||r},this.renderSendLiveButton=e=>{const{i18n:t,vars:a,shortcutService:n}=this.props,r=n&&n.getShortcutTextByCommand("BroadcastProducerScreenSendLive"),o=t.translate("broadcast","broadcast_producer_send_live_button_tooltip",{hotkey:r});return i.createElement(A.u,{trigger:i.createElement(D.z,{content:t.translate("broadcast","broadcast_stage_layout_setLayout_broadcast"),variables:a("broadcast",[e?"":"broadcastPreLiveButton"]),onClick:this.handleSendToBroadcastButtonClicked,disabledFocusable:e,"data-tid":"broadcast-producer-stage-set-layout-button"}),content:o,position:"before"})},this.sendLiveCommandHandler=()=>(0,S.__awaiter)(this,void 0,void 0,(function*(){this.disableSendLiveButton()||(yield this.handleSendToBroadcastButtonClicked())})),this.isPostLive=()=>{const{broadcastStatus:e}=this.props;return e===R.BroadcastStatus.Stopped||e===R.BroadcastStatus.Stopping},this.getItems=()=>{const{i18n:e,broadcastLayout:{type:t},vars:a,rtmpInProperties:n}=this.props,r=this.isPostLive(),o=t===R.BroadcastLayoutType.Single,s=t===R.BroadcastLayoutType.TwoLargeLeft,l=(null==n?void 0:n.rtmpEnabled)||!1||r,c=e.stringTranslate("broadcast","broadcast_stage_layout_template_single"),d=e.stringTranslate("broadcast","broadcast_stage_layout_template_content_left");return[{key:"single-layout-button","data-tid":"broadcast-producer-stage-single-layout-button",onClick:this.onSingleLayoutClicked,disabled:r,icon:i.createElement(M.d,{outline:!0,size:"larger"}),active:o,"aria-checked":o,tooltip:c,variables:a("broadcast",["broadcastLayoutButton"])},{key:"dual-layout-button","data-tid":"broadcast-producer-stage-content-left-button",onClick:this.onTwoLargeLeftLayoutClicked,disabled:l,icon:i.createElement(x.Y,{outline:!0,size:"larger"}),active:s,"aria-checked":s,tooltip:d,variables:a("broadcast",["broadcastLayoutButton","broadcastRightLayoutButton"])}].map(this.createToolbarItemWithTooltip)},this.createToolbarItemWithTooltip=e=>Object.assign(Object.assign({},e),{children:e.tooltip?(e,t)=>{const{tooltip:a,key:n}=t,r=(0,S.__rest)(t,["tooltip","key"]);return i.createElement(A.u,{key:n,trigger:i.createElement(e,Object.assign({},r)),content:a,position:"below"})}:void 0}),this.onSingleLayoutClicked=()=>(0,S.__awaiter)(this,void 0,void 0,(function*(){const{broadcastLayout:{type:e},selectLayout:t,teamsCallId:a,recordPanelAction:n,createDatabag:i,ariaLiveContext:r,i18n:o}=this.props;if(e!==R.BroadcastLayoutType.Single){const e=i();e.callId=a,n(Object.assign(Object.assign({},f),{actionOutcome:N.$K.select,actionScenario:N.Tk.selectLayoutTemplate,moduleName:N.rA.singleLayoutTemplate,moduleType:N.PO.list,dataBag:e})),yield t(R.BroadcastLayoutType.Single),r.announce(o.stringTranslate("broadcast","switched_to_single_view"),!0)}})),this.onTwoLargeLeftLayoutClicked=()=>(0,S.__awaiter)(this,void 0,void 0,(function*(){const{broadcastLayout:{type:e},selectLayout:t,teamsCallId:a,recordPanelAction:n,createDatabag:i,ariaLiveContext:r,i18n:o}=this.props;if(e!==R.BroadcastLayoutType.TwoLargeLeft){const e=i();e.callId=a,n(Object.assign(Object.assign({},f),{actionOutcome:N.$K.select,actionScenario:N.Tk.selectLayoutTemplate,moduleName:N.rA.twoLargeLeftLayoutTemplate,moduleType:N.PO.list,dataBag:e})),yield t(R.BroadcastLayoutType.TwoLargeLeft),r.announce(o.stringTranslate("broadcast","switched_to_content_left"),!0)}})),this.getBroadcastSources=()=>{const{broadcastLayout:{sections:e}}=this.props;return null==e?void 0:e.reduce(((e,t)=>{if(t&&t.source&&t.source.participantMri){const a=e.findIndex((e=>{var a;return e.id===(null===(a=null==t?void 0:t.source)||void 0===a?void 0:a.participantMri)}));return-1!==a?e[a]=Object.assign(Object.assign({},e[a]),{isScreenShareLive:e[a].isScreenShareLive||t.source.type===R.BroadcastStreamType.ScreenSharing,isVideoLive:e[a].isVideoLive||t.source.type===R.BroadcastStreamType.Video}):e.push({id:t.source.participantMri,displayName:null,isScreenShareLive:t.source.type===R.BroadcastStreamType.ScreenSharing,isVideoLive:t.source.type===R.BroadcastStreamType.Video}),e}return e}),[])},this.renderStatusMessage=e=>{const{i18n:t,enableBroadcastStatusMessageForProducerScreen:a}=this.props,n=this.getBroadcastSources(),r=n.length<=0||!e||e.length!==n.length||this.isPostLive();return a?i.createElement(oe,{disable:r,i18n:t,users:e,participants:n}):null},this.handleSendToBroadcastButtonClicked=()=>(0,S.__awaiter)(this,void 0,void 0,(function*(){const{ariaLiveContext:e,broadcastLayout:t,i18n:a,teamsCallId:n,recordPanelAction:i,createDatabag:r,onSendToBroadcastButtonClicked:o}=this.props,s=r();s.callId=n,s.producerLayout=t.type===R.BroadcastLayoutType.Single?"single":"twoLargeLeft",s.producerSourceTypes=t.sections.map((e=>{var t,a,n;return(null===(t=null==e?void 0:e.source)||void 0===t?void 0:t.isLocal)?"Video"!==(null===(a=null==e?void 0:e.source)||void 0===a?void 0:a.type)?"localScreenSharing":"localVideo":"Video"!==(null===(n=null==e?void 0:e.source)||void 0===n?void 0:n.type)?"remoteScreenSharing":"remoteVideo"})),i(Object.assign(Object.assign({},f),{actionOutcome:N.$K.submit,actionScenario:N.Tk.setLayout,moduleName:N.rA.setLayoutButton,moduleType:N.PO.button,dataBag:s})),e.announce(a.stringTranslate("broadcast","broadcast_stage_layout_settingLayout_broadcast"),!0),yield o(),this.alertSendToBroadcastStatusChangeMessage()})),this.alertSendToBroadcastStatusChangeMessage=()=>{const{sendToBroadcastStatus:e,i18n:t,ariaLiveContext:a}=this.props;let n;switch(e){case T.Success:n=t.stringTranslate("broadcast","broadcast_queue_media_sent_to_live_success");break;case T.Fail:n=t.stringTranslate("broadcast","broadcast_queue_media_sent_to_live_error")}n&&a.announce(n,!0)}}componentDidMount(){const e=this.props.shortcutService;e&&(e.setCurrentArea("CallingScreen"),e.assignCommandHandler("BroadcastProducerScreenSendLive",this.sendLiveCommandHandler))}componentWillUnmount(){var e;const t=this.props.shortcutService;t&&(t.unassignCommandHandler("BroadcastProducerScreenSendLive",this.sendLiveCommandHandler),t.unsetCurrentArea("CallingScreen")),null===(e=this.broadcastWaitingForSetlayoutScenario)||void 0===e||e.cancel(),this.broadcastWaitingForSetlayoutScenario=void 0,this.waitingForSetLayoutTimeoutId&&this.props.host.clearTimeout(this.waitingForSetLayoutTimeoutId)}render(){const{isSetLayoutCommandAvailable:e,broadcastLayout:t,i18n:a,sendToBroadcastStatus:n,vars:r}=this.props,o=this.isPostLive(),s=!t.sections.find((e=>!e.source)),l=e&&s,c=s&&!e&&!o,d=n===T.InProgress;let m;c?m=a.stringTranslate("broadcast","broadcast_stage_layout_gettingReady_broadcast"):d&&(m=a.stringTranslate("broadcast","broadcast_stage_layout_settingLayout_broadcast")),d||this.isWaitingScenarioCompleted||this.handleBroadcastWaitingForSetlayoutScenario(s,c);const p=this.getBroadcastSources(),g=this.renderSendLiveButton(this.disableSendLiveButton()),v=["broadcastProducerPreviewBoxContainer"];return l&&v.push("isBroadcastProducerPreviewContainerPreLive"),i.createElement(u.k.Item,{size:"size.half","data-tid":"broadcast-producer-stage"},i.createElement(u.k,{column:!0,fill:!0,gap:"gap.large",variables:r("broadcast",["broadcastProducerStreamingSection"])},i.createElement(u.k,{space:"between",vAlign:"center",variables:r("broadcast",["broadcastProducerPreviewTitleContainer"])},i.createElement(F.x,{"data-tid":"broadcast-producer-stage-heading",content:a.translate("broadcast","broadcast_stage_preview"),weight:"semibold",size:"large"}),i.createElement(j.Q,{userIds:p.map((e=>e.id)),children:this.renderStatusMessage})),i.createElement(u.k,{"data-tid":"broadcast-producer-stage-container",variables:r("broadcast",v)},i.createElement(u.k,{variables:r("broadcast",[{name:"broadcastProducerPreviewBoxContent",props:{broadcastProducerNoPreviewBoxContent:!0}}])},m&&i.createElement(re,{labelText:m}),!o&&this.renderStagedLayout())),i.createElement(u.k,{hAlign:"start",space:"between"},i.createElement(u.k.Item,null,i.createElement(O.o,{items:[{key:"radiogroup",kind:"group",items:this.getItems()}]})),i.createElement(u.k.Item,null,i.createElement(me,{coachmarkType:"CM_SEND_TO_BROADCAST",content:a.stringTranslate("broadcast","coachmark_send_to_broadcast"),delay:3e3,trigger:g,condition:!o&&l&&!d,position:"below",accessibility:V.P})))))}handleBroadcastWaitingForSetlayoutScenario(e,t){const{scenarioFactory:a,isAnyStreamAvailable:n}=this.props;if(!this.broadcastWaitingForSetlayoutScenario&&e){const{host:e}=this.props;this.waitingForSetLayoutTimeoutId=e.setTimeout((()=>this.isWaitingScenarioCompleted=!0),12e4),this.broadcastWaitingForSetlayoutScenario=a.newScenario($.XA.BroadcastWaitingForSetlayout)}this.broadcastWaitingForSetlayoutScenario&&(t?t&&!n&&(this.broadcastWaitingForSetlayoutScenario.cancel(),this.broadcastWaitingForSetlayoutScenario=void 0):(this.broadcastWaitingForSetlayoutScenario.stop(),this.broadcastWaitingForSetlayoutScenario=void 0,this.isWaitingScenarioCompleted=!0))}renderStagedLayout(){const{broadcastLayout:{sections:e,type:t},vars:a}=this.props;if(t===R.BroadcastLayoutType.Single&&1===e.length)return this.renderSection(e[0]);if(t===R.BroadcastLayoutType.TwoLargeLeft){const t=e.find((e=>e.type===R.BroadcastSectionType.Left)),n=e.find((e=>e.type===R.BroadcastSectionType.Right)),r=Boolean(t&&t.source&&!(null==n?void 0:n.source)),o=Boolean(n&&n.source&&!(null==t?void 0:t.source));return t&&n&&i.createElement(u.k,{fill:!0},i.createElement(u.k,{variables:a("broadcast",[{name:"broadcastProducerLargeSection",props:{isBroadcastLargeSection:!0}}])},this.renderSection(t,o)),i.createElement(u.k.Item,{grow:!0},i.createElement(u.k,{variables:a("broadcast",[{name:"broadcastProducerSmallSection",props:{isBroadcastSmallSection:!0}}])},this.renderSection(n,r))))}return null}renderSection(e,t){const{teamsCallId:a,isVideoOn:n,isScreenSharingOn:r,rtmpInProperties:o,broadcastLayout:{activeSectionId:s},selectBroadcastSection:l,clearBroadcastSource:c,callingIntentId:d}=this.props;return i.createElement(te,{teamsCallId:a,isVideoOn:n,isScreenSharingOn:r,rtmpInProperties:o,currentSection:e,activeSectionId:s,selectBroadcastSection:l,clearBroadcastSource:c,callingIntentId:d,shouldBeActivated:t})}}const ge=i.memo((e=>{const t=i.useContext(E.Vo),a=i.useContext(w.OO),{getItems:n}=(0,W.au)(),{recordPanelAction:r,createDatabag:o}=(0,ee.It)(),s=n(),l=(0,z._T)(e.isVideoOn||e.isScreenSharingOn,s),c=i.useContext(ue.ib);return i.createElement(pe,Object.assign({},e,{ariaLiveContext:t,i18n:a,isAnyStreamAvailable:l,recordPanelAction:r,createDatabag:o,shortcutService:c}))}));var ve=a(208914),Se=a(767008),ke=a(118824);const be=e=>{var{teamsCallId:t}=e,a=(0,S.__rest)(e,["teamsCallId"]);return i.createElement(r.AE,{query:o,variables:{id:t}},(e=>i.createElement(r.AE,{query:_,variables:{teamsCallId:t}},(n=>i.createElement(ye,Object.assign({teamsCallId:t,callQueryResult:e,layoutQueryResult:n},a))))))},ye=e=>{var{callQueryResult:t,layoutQueryResult:a}=e,n=(0,S.__rest)(e,["callQueryResult","layoutQueryResult"]);const{vars:r}=(0,s.L)(),{loggerFactory:{newLogger:o},host:l}=(0,se.SE)(),{recordPanelAction:c,createDatabag:d}=(0,ee.It)(),m=new ve.T(n.client,o),{error:u,loading:p,data:g}=t,{error:v,loading:k,data:b}=a;return!(v||u||k||p)&&g&&g.call&&b&&b.broadcastLayout?i.createElement(he,Object.assign({broadcastMeeting:g.call.broadcastMeeting,isVideoOn:g.call.isVideoOn,isScreenSharingOn:g.call.isScreenSharingOn,rtmpInProperties:g.call.rtmpInProperties,broadcastLayout:b.broadcastLayout,newLogger:o,host:l,scenarioFactory:m,recordPanelAction:c,createDatabag:d,vars:r},n)):null};class he extends i.PureComponent{constructor(e){super(e),this.clearBroadcastSource=e=>(0,S.__awaiter)(this,void 0,void 0,(function*(){const{teamsCallId:t,clearBroadcastSource:a}=this.props;yield a({variables:{teamsCallId:t,sectionId:e}})})),this.selectBroadcastSection=e=>(0,S.__awaiter)(this,void 0,void 0,(function*(){const{teamsCallId:t,selectBroadcastSection:a}=this.props;yield a({variables:{teamsCallId:t,sectionId:e}})})),this.selectLayout=e=>(0,S.__awaiter)(this,void 0,void 0,(function*(){const{teamsCallId:t,updateBroadcastLayout:a}=this.props;yield a({variables:{teamsCallId:t,layoutType:e}})})),this.onSendToBroadcastButtonClicked=()=>(0,S.__awaiter)(this,void 0,void 0,(function*(){this.setState({sendToBroadcastStatus:T.InProgress});const{teamsCallId:e,sendToBroadcast:t,broadcastLayout:a}=this.props,n=a.sections.map((e=>({isLocal:e&&e.source&&e.source.isLocal||!1,participantMri:e&&e.source&&e.source.participantMri,type:this.getStreamType(e&&e.source&&e.source.type||R.BroadcastStreamType.Video)})));try{yield t({variables:{teamsCallId:e,sources:n}}),this.setState({sendToBroadcastStatus:T.Success})}catch(e){this.logger.error("Send to broadcast mutation failed"),this.setState({sendToBroadcastStatus:T.Fail})}})),this.logger=this.props.newLogger("BroadcastProducerStageContainer"),this.state={sendToBroadcastStatus:T.None}}render(){const{broadcastLayout:e,teamsCallId:t,broadcastMeeting:a,isVideoOn:n,isScreenSharingOn:r,rtmpInProperties:o,callingIntentId:s,scenarioFactory:l,host:c,recordPanelAction:d,createDatabag:m,vars:u}=this.props,{sendToBroadcastStatus:p}=this.state;return i.createElement(Se.h_,{category:ke.J.Broadcast},(({enableBroadcastStatusMessageForProducerScreen:g})=>i.createElement(ge,{sendToBroadcastStatus:p,teamsCallId:t,broadcastStatus:a&&a.broadcastState&&a.broadcastState.status||null,isSetLayoutCommandAvailable:a&&a.commands&&a.commands.setLayout||!1,isVideoOn:n,isScreenSharingOn:r,rtmpInProperties:o,broadcastLayout:e,onSendToBroadcastButtonClicked:this.onSendToBroadcastButtonClicked,selectLayout:this.selectLayout,selectBroadcastSection:this.selectBroadcastSection,clearBroadcastSource:this.clearBroadcastSource,callingIntentId:s,scenarioFactory:l,host:c,recordPanelAction:d,createDatabag:m,vars:u,enableBroadcastStatusMessageForProducerScreen:!!g})))}getStreamType(e){switch(e){case R.BroadcastStreamType.ScreenSharing:return R.StreamType.ScreenSharing;case R.BroadcastStreamType.Video:return R.StreamType.Video}}}const Ce=i.memo((0,k.CG)((e=>i.createElement(r.mm,{mutation:b},(t=>i.createElement(r.mm,{mutation:y},(a=>i.createElement(r.mm,{mutation:h},(n=>i.createElement(r.mm,{mutation:C},(r=>i.createElement(be,Object.assign({sendToBroadcast:t,updateBroadcastLayout:a,selectBroadcastSection:n,clearBroadcastSource:r},e)))))))))))));var Ie=a(575379);const _e={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"startBroadcast"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"teamsCallId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"startBroadcast"},arguments:[{kind:"Argument",name:{kind:"Name",value:"teamsCallId"},value:{kind:"Variable",name:{kind:"Name",value:"teamsCallId"}}}]}]}}]},Be={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"stopBroadcast"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"teamsCallId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"stopBroadcast"},arguments:[{kind:"Argument",name:{kind:"Name",value:"teamsCallId"},value:{kind:"Variable",name:{kind:"Name",value:"teamsCallId"}}}]}]}}]},Te={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"callParticipants"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"callParticipants"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"participantFieldsForBroadcastProducer"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"participantFieldsForBroadcastProducer"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Participant"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"participantId"}},{kind:"Field",name:{kind:"Name",value:"displayName"}},{kind:"Field",name:{kind:"Name",value:"isVideoLive"}},{kind:"Field",name:{kind:"Name",value:"isScreenShareLive"}}]}}]};var Pe=a(616267),Ne=a(960068),fe=a(594169),Le=a(197447),Ee=a(990868);class we extends i.PureComponent{constructor(){super(...arguments),this.alertBroadcastStatusChangeMessage=e=>{const{startBroadcastStatus:t,stopBroadcastStatus:a,i18n:n,ariaLiveContext:i}=this.props;let r;if(e===P.Start)switch(t){case T.Success:r=n.stringTranslate("broadcast","broadcast_stage_layout_start_broadcast");break;case T.Fail:r=n.stringTranslate("broadcast","broadcast_stage_layout_starting_broadcast_error")}else if(e===P.Stop)switch(a){case T.Success:r=n.stringTranslate("broadcast","broadcast_stage_layout_stop_broadcast");break;case T.Fail:r=n.stringTranslate("broadcast","broadcast_stage_layout_stopping_broadcast_error")}r&&i.announce(r,!0)},this.onConfirmStartButtonClicked=()=>(0,S.__awaiter)(this,void 0,void 0,(function*(){const{onConfirmStartButtonClicked:e,i18n:t,ariaLiveContext:a}=this.props;a.announce(t.stringTranslate("broadcast","broadcast_stage_layout_starting_broadcast"),!0),yield e(),this.alertBroadcastStatusChangeMessage(P.Start)})),this.onConfirmStopButtonClicked=()=>(0,S.__awaiter)(this,void 0,void 0,(function*(){const{onConfirmStopButtonClicked:e,i18n:t,ariaLiveContext:a}=this.props;a.announce(t.stringTranslate("broadcast","broadcast_stage_layout_stopping_broadcast"),!0),yield e(),this.alertBroadcastStatusChangeMessage(P.Stop)})),this.renderStatusMessage=e=>{const{liveParticipants:t,i18n:a,enableBroadcastStatusMessageForProducerScreen:n}=this.props,r=0===t.length||!e||e.length!==t.length;return n?i.createElement(oe,{disable:r,i18n:a,isForLivePreview:!0,users:e,participants:t}):null}}render(){const{i18n:e,isPreLive:t,isLive:a,isPostLive:n,liveParticipants:r}=this.props,o=["broadcastProducerPreviewBoxContainer"];return t&&o.push("isBroadcastProducerPreviewContainerPreLive"),n&&o.push("isBroadcastProducerPreviewContainerPostLive"),a&&o.push("isBroadcastProducerPreviewContainerLive"),i.createElement(s.f.Consumer,null,(({vars:t})=>i.createElement(u.k.Item,{size:"size.half","data-tid":"broadcast-producer-live-preview"},i.createElement(u.k,{column:!0,fill:!0,gap:"gap.large",variables:t("broadcast",["broadcastProducerStreamingSection"])},i.createElement(u.k,{space:"between",vAlign:"center",variables:t("broadcast",["broadcastProducerPreviewTitleContainer"])},i.createElement(De,{i18n:e}),i.createElement(j.Q,{userIds:r.map((e=>e.id)),children:this.renderStatusMessage})),i.createElement(u.k,{"data-tid":"broadcast-producer-live-section",variables:t("broadcast",o)},this.renderPreviewBox()),i.createElement(u.k,{hAlign:"end"},i.createElement(Ve,Object.assign({},Object.assign(Object.assign({},this.props),{onConfirmStartButtonClicked:this.onConfirmStartButtonClicked,onConfirmStopButtonClicked:this.onConfirmStopButtonClicked}))))))))}renderPreviewBox(){const{isPreLive:e,isLive:t,isPostLive:a,i18n:n,renderLayoutItem:r,composerBotItemId:o,streamIdToRender:l,isLoading:c}=this.props;return i.createElement(s.f.Consumer,null,(({vars:s})=>i.createElement(u.k,{variables:s("broadcast",["broadcastProducerPreviewBoxContent"])},c&&i.createElement(Fe,{i18n:n,isEventStarting:e,isEventStopping:t}),i.createElement(u.k,{variables:s("broadcast",[o||a?"":"activeBroadcastSection"]),fill:!0,hAlign:"center",vAlign:"center"},o?i.createElement(u.k,{fill:!0,hAlign:"center",vAlign:"center",variables:s("broadcast",["producerPreviewItemContainer"])},r(o,{onLayoutItemClicked:H.noop,callType:G.rf.Conference,position:Q.t.BroadcastLivePreview,streamIdToRender:l,forceHighResolutionVideo:!0})):i.createElement(Oe,{isMeetingOver:a,i18n:n})),i.createElement(u.k,{variables:s("broadcast",["producerLiveCaptionOn"])},i.createElement(Le.z,{simpleTextStyle:!0,showBackground:!1,showSettingsButton:!1})))))}}const Ae=(0,Ne.X)((0,Pe.G)(we)),De=i.memo((({i18n:e})=>i.createElement(F.x,{"data-tid":"broadcast-live-preview-heading",content:e.translate("broadcast","broadcast_meeting_text"),weight:"semibold",size:"large"})));De.displayName="LivePreviewHeadingText";const Fe=i.memo((({i18n:e,isEventStarting:t,isEventStopping:a})=>{let n;if(t)n=e.stringTranslate("broadcast","broadcast_stage_layout_starting_broadcast");else{if(!a)return null;n=e.stringTranslate("broadcast","broadcast_stage_layout_stopping_broadcast")}return i.createElement(re,{labelText:n})}));Fe.displayName="LivePreviewLoadingOverlay";const Oe=i.memo((({isMeetingOver:e,i18n:t})=>e?i.createElement(F.x,{"data-tid":"broadcast-live-preview-fallback-message",content:t.translate("broadcast","broadcast_postMeeting_Message"),size:"large"}):i.createElement(F.x,{"data-tid":"broadcast-live-preview-fallback-message",content:t.translate("broadcast","broadcast_preview_notAvailable"),size:"large"})));Oe.displayName="LivePreviewFallbackMessage";const Ve=i.memo((e=>{const{isPreLive:t,isLive:a,isPostLive:n,i18n:r,isStartCommandAvailable:o,isStopCommandAvailable:l,onConfirmCancelButtonClicked:c,onConfirmStartButtonClicked:d,onConfirmStopButtonClicked:m,onStartBroadcastButtonClicked:p,onStopBroadcastButtonClicked:g,showConfirmStartDialog:v,showConfirmStopDialog:S,maxAllowedDuration:k}=e,{enableRestartEventForBroadcastProducers:b}=(0,Se.NC)(ke.J.Broadcast),y=t&&o,h=a&&l,C=i.useCallback((()=>{y&&p(),h&&g()}),[y,h,p,g]),I=(0,Ee.b)("BroadcastProducerScreenToggleStartEnd",C),_=I&&I.getShortcutTextByCommand("BroadcastProducerScreenToggleStartEnd"),B=r.translate("broadcast","broadcast_producer_start_button_tooltip",{hotkey:_}),T=r.translate("broadcast","broadcast_producer_end_button_tooltip",{hotkey:_}),P=b?"broadcast_with_restart_start_confirm_message_text":"broadcast_start_confirm_message_text",N=b?"broadcast_with_restart_stop_confirm_message_text":"broadcast_stop_confirm_message_text";return i.createElement(i.Fragment,null,i.createElement(s.f.Consumer,null,(({vars:e})=>i.createElement(u.k.Item,null,t||n?i.createElement(me,{coachmarkType:"CM_START_BROADCAST",content:r.stringTranslate("broadcast","coachmark_start_broadcast"),delay:3e3,condition:t&&o,position:"below",accessibility:V.P,trigger:i.createElement(A.u,{content:B,position:"before",trigger:i.createElement(D.z,{"data-tid":"broadcast-live-preview-start-button",disabledFocusable:!y,content:r.translate("broadcast","broadcast_stage_layout_start_broadcast"),variables:y?e("broadcast",["broadcastPreLiveButton"]):{},onClick:p})})}):i.createElement(A.u,{content:T,position:"before",trigger:i.createElement(D.z,{"data-tid":"broadcast-live-preview-stop-button",content:r.translate("broadcast","broadcast_stage_layout_stop_broadcast"),disabledFocusable:!h,variables:h?e("broadcast",["broadcastStopButton"]):{},onClick:g})})))),v&&i.createElement(fe.X,{dataTid:"render_live_preview_start_confirm",confirmAction:d,dismissAction:c,openDialog:v,headerText:["broadcast","broadcast_start_confirm_title_text"],contentText:{i18nKey:["broadcast",P],variables:{isTagAInHtml:!0,maxDuration:k}},confirmText:["broadcast","broadcast_dialog_confirm_button_text"],cancelText:["broadcast","cancel"]}),S&&i.createElement(fe.X,{dataTid:"render_live_preview_stop_confirm",confirmAction:m,dismissAction:c,openDialog:S,headerText:["broadcast","broadcast_stop_confirm_title_text"],contentText:{i18nKey:["broadcast",N]},confirmText:["broadcast","broadcast_dialog_confirm_button_text"],cancelText:["broadcast","cancel"]}))})),Me=i.memo((({teamsCallId:e})=>{var t;const{loggerFactory:{newLogger:a},user:n}=(0,se.SE)(),{recordPanelAction:r,createDatabag:s}=(0,ee.It)(),[l]=(0,Ie.useMutation)(_e),[c]=(0,Ie.useMutation)(Be),{data:d,loading:m,error:u}=(0,Ie.useQuery)(o,{variables:{id:e}}),p=!!(null==d?void 0:d.call)&&(e=>{var t,a,n,i;return!!e.broadcastMeeting&&((null===(a=null===(t=e.broadcastMeeting)||void 0===t?void 0:t.broadcastState)||void 0===a?void 0:a.status)===R.BroadcastStatus.Starting||(null===(i=null===(n=e.broadcastMeeting)||void 0===n?void 0:n.broadcastState)||void 0===i?void 0:i.status)===R.BroadcastStatus.Started)})(d.call),{data:g,loading:v,error:S}=(0,Ie.useQuery)(Te,{variables:{id:e},skip:!p});if(u||m||!d||!d.call)return null;const k=v||S?[]:null==g?void 0:g.callParticipants,b=null===(t=d.call.broadcastMeeting)||void 0===t?void 0:t.broadcastMaxAllowedDuration,y=(0,H.round)(b/60,1);return i.createElement(Re,{call:d.call,userId:null==n?void 0:n.id,callParticipants:k,startBroadcast:l,stopBroadcast:c,teamsCallId:e,newLogger:a,recordPanelAction:r,createDatabag:s,maxAllowedDuration:y})}));Me.displayName="BroadcastProducerLivePreviewContainer";const xe=(0,W.ar)(Q.t.BroadcastLivePreview);class Re extends i.Component{constructor(e){super(e),this.getLiveStreamers=()=>{const{call:e,callParticipants:t,userId:a}=this.props,n={id:a||"",isScreenShareLive:!!e.isScreenShareLive,isVideoLive:!!e.isVideoLive};return(t?t.map((e=>({id:e.id,isScreenShareLive:e.isScreenShareLive,isVideoLive:e.isVideoLive}))):[]).concat(n).filter((e=>e.id&&(e.isScreenShareLive||e.isVideoLive)))},this.onConfirmStartButtonClicked=()=>(0,S.__awaiter)(this,void 0,void 0,(function*(){this.setState({isLoading:!0,showConfirmStartDialog:!1,startBroadcastStatus:T.InProgress});const{teamsCallId:e,startBroadcast:t,recordPanelAction:a,createDatabag:n}=this.props,i=n();i.callId=e,a(Object.assign(Object.assign({},f),{actionOutcome:N.$K.submit,actionScenario:N.Tk.startBroadcast,moduleName:N.rA.startBroadcastButton,moduleType:N.PO.button,dataBag:i}));try{yield t({variables:{teamsCallId:e}}),this.setState({startBroadcastStatus:T.Success})}catch(e){this.logger.error("Start broadcast mutation failed..."),this.setState({startBroadcastStatus:T.Fail})}this.setState({isLoading:!1})})),this.onConfirmCancelButtonClicked=()=>(0,S.__awaiter)(this,void 0,void 0,(function*(){this.setState({showConfirmStartDialog:!1,showConfirmStopDialog:!1})})),this.onStartBroadcastButtonClicked=()=>(0,S.__awaiter)(this,void 0,void 0,(function*(){this.setState({showConfirmStartDialog:!0})})),this.onStopBroadcastButtonClicked=()=>(0,S.__awaiter)(this,void 0,void 0,(function*(){this.setState({showConfirmStopDialog:!0})})),this.onConfirmStopButtonClicked=()=>(0,S.__awaiter)(this,void 0,void 0,(function*(){this.setState({isLoading:!0,showConfirmStopDialog:!1,stopBroadcastStatus:T.InProgress});const{teamsCallId:e,stopBroadcast:t,recordPanelAction:a,createDatabag:n}=this.props,i=n();i.callId=e,a(Object.assign(Object.assign({},f),{actionOutcome:N.$K.submit,actionScenario:N.Tk.stopBroadcast,moduleName:N.rA.stopBroadcastButton,moduleType:N.PO.button,dataBag:i}));try{yield t({variables:{teamsCallId:e}}),this.setState({stopBroadcastStatus:T.Success})}catch(e){this.logger.error("Stop broadcast mutation failed..."),this.setState({stopBroadcastStatus:T.Fail})}this.setState({isLoading:!1})})),this.logger=e.newLogger("BroadcastProducerLivePreviewContainer"),this.state={isLoading:!1,showConfirmStartDialog:!1,showConfirmStopDialog:!1,startBroadcastStatus:T.None,stopBroadcastStatus:T.None}}render(){var e,t;const{call:a,maxAllowedDuration:n}=this.props,{isLoading:r,showConfirmStartDialog:o,showConfirmStopDialog:s,startBroadcastStatus:l,stopBroadcastStatus:c}=this.state,d=null===(t=null===(e=a.broadcastMeeting)||void 0===e?void 0:e.broadcastState)||void 0===t?void 0:t.status,m=!d||d===R.BroadcastStatus.NotStarted,u=d===R.BroadcastStatus.Starting||d===R.BroadcastStatus.Started,p=d===R.BroadcastStatus.Stopping||d===R.BroadcastStatus.Stopped,g=this.getLiveStreamers();return i.createElement(W.nd,null,(({renderLayoutItem:e})=>i.createElement(xe,null,(({ids:t})=>i.createElement(Se.h_,{category:ke.J.Broadcast},(({enableBroadcastStatusMessageForProducerScreen:d})=>{var v,S,k,b,y;return i.createElement(Ae,{isLoading:r,liveParticipants:g,composerBotItemId:t&&t[0],streamIdToRender:(null===(v=a.broadcastMeeting)||void 0===v?void 0:v.composerStreamId)||void 0,renderLayoutItem:e,isPreLive:m,isLive:u,isPostLive:p,isStartCommandAvailable:(null===(k=null===(S=a.broadcastMeeting)||void 0===S?void 0:S.commands)||void 0===k?void 0:k.start)||!1,isStopCommandAvailable:(null===(y=null===(b=a.broadcastMeeting)||void 0===b?void 0:b.commands)||void 0===y?void 0:y.stop)||!1,showConfirmStartDialog:o,showConfirmStopDialog:s,onConfirmStartButtonClicked:this.onConfirmStartButtonClicked,onConfirmStopButtonClicked:this.onConfirmStopButtonClicked,onConfirmCancelButtonClicked:this.onConfirmCancelButtonClicked,onStartBroadcastButtonClicked:this.onStartBroadcastButtonClicked,onStopBroadcastButtonClicked:this.onStopBroadcastButtonClicked,stopBroadcastStatus:c,startBroadcastStatus:l,maxAllowedDuration:n,enableBroadcastStatusMessageForProducerScreen:!!d})}))))))}}const je={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"setBroadcastActiveSectionSource"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"teamsCallId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"source"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"BroadcastClientSourceInput"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"setBroadcastActiveSectionSource"},arguments:[{kind:"Argument",name:{kind:"Name",value:"teamsCallId"},value:{kind:"Variable",name:{kind:"Name",value:"teamsCallId"}}},{kind:"Argument",name:{kind:"Name",value:"source"},value:{kind:"Variable",name:{kind:"Name",value:"source"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"client"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"broadcastLayout"}}]}}]}},...I.uk.definitions]},$e={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"muteAllParticipants"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"teamsCallId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"muteAllParticipants1"},arguments:[{kind:"Argument",name:{kind:"Name",value:"teamsCallId"},value:{kind:"Variable",name:{kind:"Name",value:"teamsCallId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}}]};var ze=a(934295),We=a(113559),Ke=a(864579),Je=a(273137),qe=a(815373),He=a(834038),Qe=a(617484),Ge=a(841730),Xe=a(323511),Ue=a(881933),Ye=a(454623);const Ze=e=>({id:e.id,position:e.position,isScreenShare:e.isScreenShare,isScreenShareLive:!!e.isScreenShareLive,isVideoLive:!!e.isVideoLive,isVideoOn:e.isVideoOn,participantMri:e.participantId,isServerMuted:e.isServerMuted}),et=(e,t)=>({participantMri:t&&t.id||"",isScreenShare:e.isScreenSharingOn,isScreenShareLive:!!e.isScreenShareLive,isVideoLive:!!e.isVideoLive,isVideoOn:e.isVideoOn});var tt=a(117177),at=a(519031);const nt=i.memo((e=>{var t;const{teamsCallId:a,sourceType:n,streamType:r,onPreviewSelected:o,itemId:l,itemPosition:c,callingIntentId:d,onMuteParticipantButtonClicked:m,onAllowToPresentButtonClicked:p,rtmpInProperties:g}=e,{enableSourcePickerContextMenuForBroadcastProducers:v}=(0,Se.NC)(ke.J.Broadcast),{renderLayoutItem:S}=(0,W.au)(),k=(0,w.Cq)(),{vars:b}=i.useContext(s.f),[y,h]=i.useState(""),{data:C}=(0,Xe.a)(l||"",["meetingRole"]),I=(null===(t=null==C?void 0:C.callParticipant)||void 0===t?void 0:t.meetingRole)===Ue.E.Attendee,[_,T]=i.useState(!1),P=(0,tt.q)(l),N=(null==g?void 0:g.rtmpEnabled)||!1,f=((e,t)=>{const{user:a}=(0,se.SE)(),{layoutObservable:n,getItems:r}=(0,W.au)();let o;o=e===B.Local?et({isScreenShareLive:!1,isScreenSharingOn:!1,isVideoLive:!1,isVideoOn:!1},a):Ze(r().find((e=>e.id===t))||{id:t,position:Q.t.None,isScreenShare:!1,isScreenShareLive:!1,isVideoLive:!1,isVideoOn:!1,participantId:""});const[s,l]=i.useState(o),{data:c}=(0,Ye.W)(["isScreenSharingOn","isScreenShareLive","isVideoOn","isVideoLive"]);return i.useEffect((()=>{e===B.Local&&(null==c?void 0:c.call)&&l(et(c.call,a))}),[e,c,a]),i.useEffect((()=>{let a;return e===B.Remote&&t&&(a=n.pipe((0,Z.h)((e=>e.id===t))).subscribe((e=>{l(Ze(e))}))),()=>{a&&a.unsubscribe()}}),[e,t,n]),s})(n,l),L=r===R.StreamType.ScreenSharing&&(null==f?void 0:f.isScreenShareLive)||r===R.StreamType.Video&&(null==f?void 0:f.isVideoLive)||!1,E=r===R.StreamType.Video&&(null==f?void 0:f.isVideoOn)||r===R.StreamType.ScreenSharing&&(null==f?void 0:f.isScreenShare)||!1,A=f&&f.participantMri,F=f&&f.isServerMuted,{finalDisplayName:O}=(0,at.hS)(A),V=i.useCallback((()=>{const e=st(r);o(n,e,A)}),[n,r,A,o]),M=i.useCallback((e=>{m&&m(A),e.stopPropagation()}),[A,m]),x=i.useCallback((e=>{p&&p(A),e.stopPropagation()}),[A,p]),j=ct(e,E,I,N,P.isRtmpInBot),$=k.stringTranslate("broadcast","allow_to_present_button"),z=l||"",K=(0,Ge.h)(z)>0&&!F,J=n===B.Remote&&r===R.StreamType.Video&&P.canParticipantBeMutedAndUnMuted,q=i.useMemo((()=>J?F?k.stringTranslate("broadcast","broadcast_producer_contributor_muted"):k.stringTranslate("broadcast","calling_button_mute"):""),[F,k,J]),H=F?i.createElement(qe.w,null):K?i.createElement(Ke.L,null):i.createElement(Je.Z,null),G=["producerSourcePickerPreviewItemFooterContainer"];j&&G.push("isProducerSourcePickerPreviewItemFooterDisabled");const X=ot(y,e.sourceItemCategoryAriaText,j,O,q,k),Y=i.createElement(ze.a.Item,{onMouseEnter:()=>{T(I&&!!p)},onMouseLeave:()=>{T(!1)},index:-1,onClick:j?void 0:V,"aria-label":X,variables:b("broadcast",["isSourcePicker",j?"":"isProducerSourcePickerPreviewItemEnabled",j?"isProducerSourcePickerPreviewItemDisabled":"",L?"isProducerSourcePickerStreamLive":""]),content:i.createElement(u.k,{column:!0,variables:b("broadcast",["producerSourcePickerPreviewItemContainer"])},i.createElement(U,{teamsCallId:a,sourceType:n,streamType:r,participantMri:A,isStreamOn:E,itemId:l,renderLayoutItem:S,itemPosition:c,callingIntentId:d,isDisabled:j,isSourcePickerItem:!0,setAriaLabel:h,vars:b}),i.createElement(u.k,{space:"between",vAlign:"center",hAlign:"start",variables:b("broadcast",G)},O&&lt(O),J&&i.createElement(D.z,{"data-tid":"participant-mute-status-icon",iconOnly:!0,text:!0,disabledFocusable:!1!==F,"data-is-focusable":!v,"aria-hidden":!!v,icon:H,title:q,onClick:M,onKeyDown:e=>{e.keyCode!==Qe.m.enter&&e.keyCode!==Qe.m.space||e.stopPropagation()},variables:b("broadcast",["sourcePickerMutedIndicator"])}),I&&_&&i.createElement(u.k,{fill:!0,column:!0,hAlign:"center",vAlign:"center",variables:b("broadcast",["sourcePickerAnonymousPresenterButtonOverlay"])},i.createElement(D.z,{"data-tid":"allow-participant-to-present","data-is-focusable":!1,"aria-hidden":!0,size:"small",content:$,onClick:x}))))});return it(k,F,M,J,x,I,N,P.isRtmpInBot,v,Y)}));nt.displayName="BroadcastProducerSourcePickerItemInner";const it=(e,t,a,n,r,o,s,l,c,d)=>{const m=[];return n&&m.push({icon:t?i.createElement(qe.w,{outline:!0,xSpacing:"after"}):i.createElement(Je.Z,{outline:!0,xSpacing:"after"}),content:e.stringTranslate("broadcast","calling_roster_mute_participant_popup_item"),disabled:t,contextMenu:!0,onClick:a}),o&&m.push({icon:i.createElement(He.v,{outline:!0,xSpacing:"after"}),content:e.stringTranslate("broadcast","allow_to_present_button"),contextMenu:!0,disabled:!1,onClick:r}),s&&!l&&(d=rt(d,e)),m.length&&c?i.createElement(We.j2,{contextMenu:!0,trigger:d,menu:m}):d},rt=(e,t)=>{const a=t.stringTranslate("broadcast","broadcast_rtmpIn_disabled_source_tooltip_message");return i.createElement(A.u,{"data-tid":"non-rtmp-disabled-source-tooltip",trigger:e,content:a,accessibility:V.P})},ot=(e,t,a,n,i,r)=>{let o=r.stringTranslate("broadcast",t);return e?o=`${o}, ${e}, `:(o=`${o}, ${n}`,o=`${o}, ${i}`),a&&(o=`${o}, ${r.stringTranslate("broadcast","broadcast_disabled_source_item_aria_label_text")}, `),o},st=e=>{switch(e){case R.StreamType.Video:return R.BroadcastStreamType.Video;case R.StreamType.ScreenSharing:return R.BroadcastStreamType.ScreenSharing}},lt=e=>i.createElement(i.Fragment,null,e&&i.createElement(F.x,{content:e,size:"small",align:"start",truncated:!0})),ct=(e,t,a,n,i)=>{const{streamType:r,supportedStreamTypes:o}=e;return n?!i:!(t&&!a)||(r===R.StreamType.Video?o.indexOf(R.BroadcastStreamType.Video)<0:r===R.StreamType.ScreenSharing&&o.indexOf(R.BroadcastStreamType.ScreenSharing)<0)},dt=(0,k.CG)(nt),mt=i.memo((e=>{const t=i.useContext(w.OO);return i.createElement(F.x,{content:t.translate("broadcast",e.titleKey),weight:"semibold",size:"medium","data-tid":"broadcast-producer-source-picker-item-title"})}));mt.displayName="BroadcastProducerSourcePickerItemTitle";class ut extends i.PureComponent{constructor(){super(...arguments),this.sourcePickerItemTitle="broadcast_producer_contributor_sharing_title",this.renderParticipant=e=>{const{teamsCallId:t,onPreviewSelected:a,supportedStreamTypes:n,callingIntentId:r,onMuteParticipantButtonClicked:o,onAllowToPresentButtonClicked:s,rtmpInProperties:l}=this.props,c=B.Remote,d=e&&e.isScreenShare?R.StreamType.ScreenSharing:R.StreamType.Video;return i.createElement(dt,{key:e.id,teamsCallId:t,sourceType:c,streamType:d,itemId:e.id,itemPosition:Q.t.BroadcastSourcePicker,onPreviewSelected:a,supportedStreamTypes:n,callingIntentId:r,onMuteParticipantButtonClicked:o,onAllowToPresentButtonClicked:s,rtmpInProperties:l,sourceItemCategoryAriaText:this.sourcePickerItemTitle})}}render(){const{itemIds:e,getItems:t,composerBotMris:a,vars:n,showAllowToPresentDialog:r,onConfirmAllowToPresentButtonClicked:o,onCancelAllowToPresentButtonClicked:s}=this.props;if(!(e.length>0))return null;const l=t().filter((e=>!(0,z.YD)(e.id,a)&&!e.isScreenShare));return i.createElement(Se.h_,{category:ke.J.Platform},(({useMacKeyboardLayout:e})=>i.createElement(Se.h_,{category:ke.J.Broadcast},(({enableMacFlickeringMitigation:t})=>i.createElement(i.Fragment,null,i.createElement(u.k,{gap:"gap.medium",variables:n("broadcast",[{name:"broadcastProducerParticipantPanel",props:{shouldScroll:t&&e||!1}}]),"data-tid":"broadcast-producer-participant-panel"},l.length>0&&this.renderParticipants(l,n)),i.createElement(fe.X,{dataTid:"render_participent_change_role",openDialog:r,confirmAction:o,dismissAction:s,headerText:["calling","calling_confirm_change_participant_role_dialog_title"],contentText:{i18nKey:["calling","calling_confirm_change_participant_role_dialog_text"]},confirmText:["calling","calling_roster_change_participant_role"],cancelText:["broadcast","cancel"]}))))))}renderParticipants(e,t){return i.createElement(u.k,{column:!0,gap:"gap.small"},i.createElement(mt,{titleKey:this.sourcePickerItemTitle}),i.createElement(ze.a,{navigable:!0,horizontal:!0},i.createElement(u.k,{wrap:!0,hAlign:"start",vAlign:"center",gap:"gap.medium",variables:t("broadcast",["broadcastProducerParticipantPreviewContainer"])},e.map(this.renderParticipant))))}}const pt={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"muteParticipant"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"teamsCallId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"participantId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"muteParticipant1"},arguments:[{kind:"Argument",name:{kind:"Name",value:"teamsCallId"},value:{kind:"Variable",name:{kind:"Name",value:"teamsCallId"}}},{kind:"Argument",name:{kind:"Name",value:"participantId"},value:{kind:"Variable",name:{kind:"Name",value:"participantId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"state"}},{kind:"Field",name:{kind:"Name",value:"displayName"}},{kind:"Field",name:{kind:"Name",value:"isServerMuted"}},{kind:"Field",name:{kind:"Name",value:"participantId"}}]}}]}}]};var gt=a(942581);const vt=(0,W.ar)(Q.t.BroadcastSourcePicker),St=e=>{const{composerBotMris:t}=(0,Se.NC)(ke.J.Broadcast),a=(0,le.w)("BroadcastProducerParticipantPanelContainer");return i.createElement(r.mm,{mutation:pt},(n=>i.createElement(r.mm,{mutation:gt.k},(r=>i.createElement(W.nd,null,(({getItems:o})=>i.createElement(vt,null,(({ids:s})=>i.createElement(kt,Object.assign({itemIds:s,getItems:o,composerBotMris:t||[],muteParticipant:n,promoteParticipant:r,logger:a},e))))))))))},kt=i.memo((e=>{const t=i.useContext(E.Vo),{vars:a}=(0,s.L)(),n=i.useContext(w.OO),{muteParticipant:r,promoteParticipant:o,teamsCallId:l,logger:c}=e,[d,m]=i.useState(null),u=!!d;return i.createElement(ut,Object.assign({},e,{vars:a,onMuteParticipantButtonClicked:e=>(0,S.__awaiter)(void 0,void 0,void 0,(function*(){if(r&&l&&e)try{yield r({variables:{teamsCallId:l,participantId:e}}),t.announce(n.translate("broadcast","source_picker_mic_mute_announcement"),!0)}catch(e){c.error(`Mute participant mutation failed: ${e}`),t.announce(n.translate("broadcast","broadcast_mute_participant_error"))}else c.error("onMuteParticipantButtonClicked handler exiting; missing one or more values needed for mutation")})),showAllowToPresentDialog:u,onAllowToPresentButtonClicked:e=>{l&&e&&m({teamsCallId:l,participantId:e})},onConfirmAllowToPresentButtonClicked:()=>(0,S.__awaiter)(void 0,void 0,void 0,(function*(){if(o&&d&&d.teamsCallId&&d.participantId){try{yield o({variables:d})}catch(e){c.error(`Allow to present mutation failed: ${e}`)}m(null)}else c.error("onConfirmAllowToPresentButtonClicked handler exiting; missing one or more values needed for mutation")})),onCancelAllowToPresentButtonClicked:()=>m(null)}))}));kt.displayName="BroadcastProducerParticipantPanelInnerContainer";var bt=a(318153);const yt=(0,W.ar)(Q.t.BroadcastSourcePicker),ht=i.memo((e=>{const{isScreenSharingOn:t}=e;return t?i.createElement(_t,Object.assign({},e)):i.createElement(It,Object.assign({},e))}));ht.displayName="BroadcastProducerScreenShareItem";const Ct="broadcast_producer_active_sharing_title",It=e=>{const{teamsCallId:t,onPreviewSelected:a,supportedStreamTypes:n,callingIntentId:r,rtmpInProperties:o}=e,s=B.Remote,l=R.StreamType.ScreenSharing;return i.createElement(W.nd,null,(({getItems:e})=>i.createElement(yt,null,(({ids:c})=>{const d=e().find((e=>!!e.isScreenShare));return d&&c.length?i.createElement(u.k,{column:!0,gap:"gap.small","data-tid":"broadcast-presenter-screenshare-item"},i.createElement(mt,{titleKey:Ct}),i.createElement(u.k,null,i.createElement(dt,{key:d.id,teamsCallId:t,sourceType:s,streamType:l,itemId:d.id,itemPosition:Q.t.BroadcastSourcePicker,onPreviewSelected:a,supportedStreamTypes:n,callingIntentId:r,rtmpInProperties:o,sourceItemCategoryAriaText:Ct}))):null}))))},_t=e=>{const t=B.Local,a=R.StreamType.ScreenSharing;return i.createElement(u.k,{column:!0,gap:"gap.small","data-tid":"broadcast-producer-screenshare-item"},i.createElement(mt,{titleKey:Ct}),i.createElement(u.k,null,i.createElement(dt,Object.assign({sourceType:t,streamType:a,sourceItemCategoryAriaText:Ct},e))))},Bt=i.memo((({i18n:e,onMuteAllParticipantsButtonClicked:t})=>{const{producerLearnMoreURL:a}=(0,Se.NC)(ke.J.Broadcast),{vars:n}=(0,s.L)();return i.createElement(u.k,{column:!0,gap:"gap.medium",space:"between",padding:"padding.medium",variables:n("broadcast",["broadcastProducerSourcePickerButtonsContainer"]),"data-tid":"broadcast-producer-source-picker"},i.createElement(D.z,{fluid:!0,content:e.translate("broadcast","broadcast_producer_muteall"),onClick:t,variables:n("broadcast",["broadcastProducerSourcePickerButton"]),"data-tid":"broadcast-producer-source-picker-button"}),a&&i.createElement(F.x,{align:"center",as:"a",content:e.translate("broadcast","broadcast_learn_more_and_help_link_title"),href:a,target:"_blank",variables:n("broadcast",["isDialInLink"])}))}));Bt.displayName="BroadcastProducerSourcePickerControls";const Tt="broadcast_producer_myvideo_sharing_title",Pt=i.memo((({onMuteAllParticipantsButtonClicked:e,i18n:t,participantPanel:a,screenShare:n,localVideoPreview:r,coachmarkContent:o,coachmarkDisplayCondition:l})=>{const{vars:c}=(0,s.L)(),{useMacKeyboardLayout:d}=(0,Se.NC)(ke.J.Platform),{enableMacFlickeringMitigation:m}=(0,Se.NC)(ke.J.Broadcast),p=i.useMemo((()=>i.createElement(u.k,{hAlign:"start",gap:"gap.medium",padding:"padding.medium",variables:c("broadcast",["producerSourcePickerPreviewContainer"])},a,i.createElement(u.k,{column:!0,gap:"gap.small","data-tid":"broadcast-producer-local-video-item"},i.createElement(mt,{titleKey:Tt}),i.createElement(ze.a,{navigable:!0,horizontal:!0},r)),i.createElement(ze.a,{navigable:!0,horizontal:!0},n))),[c,a,r,n]),g=i.useMemo((()=>i.createElement(me,{coachmarkType:"CM_PICK_FROM_SOURCE_PICKER",content:o,delay:0,trigger:p,condition:l,position:"below",accessibility:V.P})),[o,p,l]);return i.createElement(u.k,{fill:!0,hAlign:"center",variables:c("broadcast",["broadcastProducerSourcePicker"])},i.createElement(u.k,{variables:c("broadcast",[{name:"broadcastProducerSourcePickerItems",props:{shouldScroll:m&&d||!1}}])},g),i.createElement(Bt,{i18n:t,onMuteAllParticipantsButtonClicked:e}))}));Pt.displayName="BroadcastProducerSourcePickerRendererInternal";const Nt=({teamsCallId:e,isScreenSharingOn:t,broadcastStatus:a,isAnySourceOn:n,hasSentToPreview:r,onPreviewSelected:o,supportedStreamTypes:s,callingIntentId:l,onMuteAllParticipantsButtonClicked:c,rtmpInProperties:d})=>{const{screenSharingModePolicy:m}=(0,Se.NC)(ke.J.Calling),{allowIPVideo:u}=(0,bt.I)(),p=(0,w.Cq)(),g="Disabled"!==m,v=i.useMemo((()=>i.createElement(St,{teamsCallId:e,supportedStreamTypes:s,onPreviewSelected:o,callingIntentId:l,rtmpInProperties:d})),[e,s,o,l,d]),S=i.useMemo((()=>i.createElement(ht,{isScreenSharingOn:t,teamsCallId:e,onPreviewSelected:o,supportedStreamTypes:s,callingIntentId:l,rtmpInProperties:d})),[t,e,o,s,l,d]),k=i.useMemo((()=>i.createElement(dt,{teamsCallId:e,sourceType:B.Local,streamType:R.StreamType.Video,supportedStreamTypes:s,onPreviewSelected:o,callingIntentId:l,rtmpInProperties:d,sourceItemCategoryAriaText:Tt})),[e,s,o,l,d]),b=i.useMemo((()=>g?p.stringTranslate("broadcast","coachmark_pick_from_source_picker"):p.stringTranslate("broadcast","coachmark_pick_video_from_source_picker")),[g,p]),y=i.useMemo((()=>!!a&&a!==R.BroadcastStatus.Stopped&&a!==R.BroadcastStatus.Stopping&&!0===u&&n&&!r),[a,u,n,r]);return i.createElement(Pt,{i18n:p,onMuteAllParticipantsButtonClicked:c,participantPanel:v,screenShare:S,localVideoPreview:k,coachmarkContent:b,coachmarkDisplayCondition:y})},ft=e=>{const{activeSectionId:t,sections:a}=e,n=a.find((e=>e.id===t));return n?n.supportedStreamTypes:[]},Lt=i.memo((e=>{var t;const{call:{id:a,isScreenSharingOn:n,isVideoOn:r,broadcastMeeting:o,rtmpInProperties:s},broadcastLayout:l,callingIntentId:c,itemIds:d,teamsCallId:m,setBroadcastActiveSectionSource:u,muteAllParticipants:p,createDatabag:g,recordPanelAction:v,logger:k}=e,b=i.useContext(E.Vo),y=i.useContext(w.OO),{composerBotMris:h}=(0,Se.NC)(ke.J.Broadcast),{getItems:C}=(0,W.au)(),I=i.useMemo((()=>{const e=C().filter((e=>!(0,z.YD)(e.id,h||[])));return d.length>0&&e.some((e=>e.isVideoOn))}),[d,C,h]),_=l&&l.sections.length>0&&l.sections.some((e=>null!==e.source)),T=i.useCallback(((e,t,a)=>(0,S.__awaiter)(void 0,void 0,void 0,(function*(){const n={teamsCallId:m,source:{isLocal:e===B.Local,type:t,participantMri:a}};try{yield u({variables:n}),b.announce(y.translate("broadcast","broadcast_video_added"),!0)}catch(e){k.error(`Set active section mutation failed: ${e}`)}}))),[m,u,b,y,k]),P=i.useCallback((()=>(0,S.__awaiter)(void 0,void 0,void 0,(function*(){const e=g();e.callId=m,v(Object.assign(Object.assign({},f),{actionOutcome:N.$K.select,actionScenario:N.Tk.sourcePickerMuteAll,moduleName:N.rA.muteAllButton,moduleType:N.PO.button,dataBag:e}));try{yield p({variables:{teamsCallId:m}})}catch(e){k.error(`Mute all participants mutation failed: ${e}`)}}))),[g,k,p,v,m]);return i.createElement(Nt,{teamsCallId:a,onPreviewSelected:T,onMuteAllParticipantsButtonClicked:P,isScreenSharingOn:n,supportedStreamTypes:ft(l),broadcastStatus:null===(t=null==o?void 0:o.broadcastState)||void 0===t?void 0:t.status,isAnySourceOn:n||r||I,rtmpInProperties:s,hasSentToPreview:_,callingIntentId:c})}));Lt.displayName="BroadcastProducerSourcePickerInnerContainer";const Et=e=>{const t=(0,le.w)("BroadcastProducerSourcePickerContainer"),{recordPanelAction:a,createDatabag:n}=(0,ee.It)();return i.createElement(r.AE,{query:o,variables:{id:e.teamsCallId}},(o=>i.createElement(r.AE,{query:_,variables:{teamsCallId:e.teamsCallId}},(r=>i.createElement(wt,null,(({ids:s})=>{const{data:l,loading:c,error:d}=o,{data:m,loading:u,error:p}=r;return!(p||d||u||c)&&l&&l.call&&m&&m.broadcastLayout?i.createElement(Lt,Object.assign({itemIds:s,logger:t,call:l.call,broadcastLayout:m.broadcastLayout,recordPanelAction:a,createDatabag:n},e)):null}))))))},wt=(0,W.ar)(Q.t.BroadcastSourcePicker),At=e=>i.createElement(r.mm,{mutation:je},(t=>i.createElement(r.mm,{mutation:$e},(a=>i.createElement(Et,Object.assign({setBroadcastActiveSectionSource:t,muteAllParticipants:a},e))))));var Dt=a(699445),Ft=a(680735),Ot=a(664460);const Vt=i.memo((e=>{const{i18n:t}=e,a=(0,E.Yx)(),n=t.stringTranslate("broadcast","broadcast_restart_waiting_overlay_message_text"),r=t.stringTranslate("broadcast","broadcast_restart_and_rejoin_waiting_text");return a.announce(n),i.createElement(u.k,{hAlign:"center",vAlign:"center",column:!0,fill:!0,gap:"gap.large",variables:{isOverlay:!0},"data-tid":"broadcast-restart-waiting-overlay"},Mt(n,r),i.createElement(Ot.sS,null))}));Vt.displayName="BroadcastRestartWaitingOverlayInternal";const Mt=(e,t)=>i.createElement(u.k,{role:"alert","aria-atomic":"true",hAlign:"center",vAlign:"center",gap:"gap.medium",column:!0},i.createElement(F.x,{size:"large",weight:"bold",content:e}),i.createElement(F.x,{size:"medium",content:t})),xt=(0,Pe.G)(Vt);var Rt=a(74395),jt=a(211450),$t=a(628235);class zt extends i.PureComponent{constructor(e){super(e),this.shareButtonId="share-button",this.closeShareTray=e=>{var t;const{setCallingScreenStatus:a,host:n,callingTelemetryFactory:i,callId:r}=this.props;e!==p._s.ScreenSharingStarted&&(null===(t=null==i?void 0:i.getOngoingScenario($t.RG.ScreenSharingPresenterStart,r||""))||void 0===t||t.cancel({reason:`share tray closed - broadcast (${e||p._s.Other})`})),a({isShareTrayVisible:!1});const o=n.document.getElementById(this.shareButtonId);o&&o.focus()};const{toggleMute:t}=this.props;this.alertActions={openDevicePanel:H.noop,openPstnDialog:H.noop,openAudioEscalationDialog:H.noop,unmuteSpeakers:t}}render(){const{vars:e}=this.props;return i.createElement(u.k,{column:!0,fill:!0,variables:e("broadcast",["broadcastProducerScreenContainer"]),"data-tid":"broadcast-producer-screen"},this.renderBannerAlertsContainer(),this.renderContent(),this.renderCenterScreenAlertsContainer())}renderBannerAlertsContainer(){const{teamsCallId:e,rtmpInProperties:t,i18n:a}=this.props,n=(null==t?void 0:t.rtmpEnabled)||!1;return i.createElement(u.k,{column:!0},n&&i.createElement(Rt.Q,{description:a.stringTranslate("broadcast","broadcast_select_rtmpIn_UFD_description"),hasDismissButton:!0}),i.createElement(Dt.X,{alertPosition:Ft.V6.Banner,screenActions:this.alertActions,teamsCallId:e}))}renderContent(){const{teamsCallId:e,isShareTrayVisible:t,isBroadcastRestartWaitingOverlayVisible:a,callId:n,scenarioFactory:r,callingIntentId:o,vars:s}=this.props;return i.createElement(Se.h_,{category:ke.J.Platform},(({useMacKeyboardLayout:l})=>i.createElement(Se.h_,{category:ke.J.Broadcast},(({enableMacFlickeringMitigation:c,enableStreamsManagerForLivePreview:d})=>i.createElement(i.Fragment,null,i.createElement(u.k,{fill:!0,"data-tid":"broadcast-producer-content-container",variables:s("broadcast",[{name:"broadcastProducerContentContainer",props:{shouldScroll:c&&l||!1}}]),gap:"gap.large"},d?i.createElement(i.Fragment,null,i.createElement(jt.D3,null,i.createElement(Ce,{teamsCallId:e,callingIntentId:o}),i.createElement(Me,{teamsCallId:e}))):i.createElement(i.Fragment,null,i.createElement(Ce,{teamsCallId:e,callingIntentId:o}),i.createElement(Me,{teamsCallId:e}))),i.createElement(u.k,{vAlign:"center",hAlign:"center",fill:!0,"data-tid":"broadcast-producer-footer-container",variables:s("broadcast",[{name:"broadcastProducerFooterContainer",props:{shouldScroll:c&&l||!1}}]),padding:"padding.medium",gap:"gap.medium"},i.createElement(u.k,{fill:!0,hAlign:"center"},t&&i.createElement(g.v,{callId:n,teamsCallId:e,closeShareTray:this.closeShareTray,shareInitiatorScreen:v._l.Call,isBroadcast:!0,participantRole:R.BroadcastParticipantRole.Producer,scenarioFactory:r,setSystemAudioDriverDialogState:this.noopSetSystemAudioDriverDialogState}),!t&&i.createElement(At,{teamsCallId:e,callingIntentId:o}))),a&&i.createElement(u.k,null,i.createElement(xt,null)))))))}noopSetSystemAudioDriverDialogState(e){}renderCenterScreenAlertsContainer(){const{showAllCallingAlertsAsBanner:e,teamsCallId:t,vars:a}=this.props;return!e&&[i.createElement(u.k,{variables:a("broadcast",["producerScreenAffirmationalAlert"]),key:"center-screen-alert",hAlign:"center"},i.createElement(Dt.X,{teamsCallId:t,alertPosition:Ft.V6.CenterScreen,screenActions:this.alertActions,exceptions:[R.AlertType.NetworkReconnect]})),i.createElement(u.k,{variables:a("calling",["callingScreenCriticalAlert"]),key:"popup-alert"},i.createElement(Dt.X,{teamsCallId:t,alertPosition:Ft.V6.Popup,screenActions:this.alertActions}))]}}const Wt=(0,Pe.G)(zt);var Kt=a(197774),Jt=a(502788),qt=a(147540),Ht=a(634889),Qt=a(59188),Gt=a(809088),Xt=a(957135);class Ut extends i.PureComponent{constructor(e){super(e),this.setCallingScreenStatus=e=>{const{setCallingScreenStatus:t,call:{id:a}}=this.props;t({variables:{teamsCallId:a,state:e}}).catch((e=>this.logger.error(`setCallingScreenStatus: failed to set state for teamsCallId:${a} reason:${e}`)))},this.toggleMute=()=>{const{toggleMute:e,call:{id:t}}=this.props;e({variables:{callId:t,context:"broadcast-producer-screen-multiwindow"}}).catch((e=>this.logger.error(`toggleMute: failed to toggle mute for callId:${t} reason:${e}`)))};const{userContext:t}=this.props;this.logger=t.loggerFactory.newLogger("BroadcastProducerScreenContainer")}render(){const{call:{id:e,callId:t,callType:a,rtmpInProperties:n},scenarioFactory:r,isShareTrayVisible:o,isBroadcastRestartWaitingOverlayVisible:s,callingIntentId:l,userContext:{host:c},vars:d,callingTelemetryFactory:m}=this.props;return i.createElement(Kt.jP,{teamsCallId:e},i.createElement(Se.h_,{category:ke.J.Calling},(({blacklistedBots:u,showAllCallingAlertsAsBanner:p})=>i.createElement(Se.h_,{category:ke.J.Broadcast},(({composerBotMris:g})=>{let v=[];return u&&(v=u.filter((e=>!(0,z.YD)(e,g||[])))),i.createElement(qt.q,{panelRegion:N.Ai.main,panelType:N.wh.BroadcastProducerScreen,threadType:N.Th.BroadcastMeeting,panelLaunchMethod:"direct",disableWrapper:!0},i.createElement(Xt.py,{teamsCallId:e},i.createElement(Qt.X,{callType:a||G.rf.Unknown,teamsCallId:e,callScreenType:Gt.p.BroadcastScreen,context:"broadcast"},i.createElement(Jt.zK,null,i.createElement(Ht.K,{teamsCallId:e,writeUpdatesToCache:!0,blacklistedBotsOverride:v},i.createElement(Wt,{teamsCallId:e,callId:t,setCallingScreenStatus:this.setCallingScreenStatus,scenarioFactory:r,isShareTrayVisible:o,isBroadcastRestartWaitingOverlayVisible:s,rtmpInProperties:n,callingIntentId:l,toggleMute:this.toggleMute,showAllCallingAlertsAsBanner:!!p,host:c,vars:d,callingTelemetryFactory:m}))))))})))))}}const Yt=(0,se.G7)(Ut);var Zt=a(488037);const ea={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"toggleMute"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"callId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"context"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"toggleMute"},arguments:[{kind:"Argument",name:{kind:"Name",value:"callId"},value:{kind:"Variable",name:{kind:"Name",value:"callId"}}},{kind:"Argument",name:{kind:"Name",value:"context"},value:{kind:"Variable",name:{kind:"Name",value:"context"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"callId"}}]}}]}}]},ta=e=>{const{loggerFactory:t,scenarioFactory:a}=(0,se.SE)(),{callingTelemetryFactory:n}=(0,Zt.J5)(),{call:r,client:o,callingIntentId:l}=e;return i.useEffect((()=>{(0,c.B)(o,l,r.id,t)}),[o,l,r.id,t]),i.createElement(s.f.Consumer,null,(({vars:t})=>i.createElement(Yt,Object.assign({call:r,scenarioFactory:a,vars:t,callingTelemetryFactory:n},e))))},aa=e=>i.createElement(r.AE,{query:d.J,variables:{teamsCallId:e.call.id}},(({data:t})=>{const a=null==t?void 0:t.callingScreenStatus,n=null==a?void 0:a.isShareTrayVisible,r=null==a?void 0:a.isBroadcastRestartWaitingOverlayVisible;return i.createElement(ta,Object.assign({isShareTrayVisible:!!n,isBroadcastRestartWaitingOverlayVisible:!!r},e))})),na=e=>{const[t]=i.useState((0,se.SE)().loggerFactory.newLogger("BroadcastScreenContainerQueryContext"));return i.createElement(Zt.nv,null,(({debugService:a})=>i.createElement(r.AE,{query:o,variables:{id:e.teamsCallId}},(({loading:n,error:r,data:o})=>{if(n)return i.createElement(l.aN,null);if(r||!o||!o.call)return t.error("Call query failed"),null;const s=o.call;return a&&a.setCall(s),i.createElement(aa,Object.assign({},Object.assign({call:s},e)))}))))},ia=e=>i.createElement(r.mm,{mutation:m.N},(t=>i.createElement(r.mm,{mutation:ea},(a=>i.createElement(na,Object.assign({},Object.assign({setCallingScreenStatus:t,toggleMute:a},e)))))))},74395:(e,t,a)=>{a.d(t,{Q:()=>m});var n=a(632735),i=a(689183),r=a(795181),o=a(607581),s=a(948192),l=a(441454),c=a(150880),d=a(134056);const m=n.memo((e=>{const{title:t,description:a,icon:m,hasDismissButton:u,onDismiss:p}=e,g=(0,l.Cq)(),[v,S]=n.useState(!1),k=n.useCallback((e=>{e.stopPropagation(),p&&p(),S(!0)}),[p]),{vars:b}=n.useContext(i.f),y=n.useContext(c.Vo),{host:h}=(0,d.SE)(),C=g.translate("broadcast","dismiss"),I=`${t||""},${a}`;let _=-1;return v?(h.clearTimeout(_),null):(_=h.setTimeout((()=>y.announce(I,!0)),1e3),n.createElement(r.k,{"data-tid":"overflow-view-only-mode-banner",variables:b("broadcast",["ufdBannerContainer"]),gap:"gap.smaller",vAlign:"center"},n.createElement(r.k.Item,{grow:!0},n.createElement(r.k,{gap:"gap.smaller",vAlign:"center",hAlign:"center",variables:b("broadcast",["ufdBannerHeader"])},m,t&&n.createElement(o.x,{weight:"bold",content:t}),a&&n.createElement(o.x,{content:a}))),u&&n.createElement(r.k.Item,{push:!0},n.createElement(r.k,{gap:"gap.smaller",padding:"padding.medium"},n.createElement(s.z,{inverted:!0,content:C,onClick:k,"aria-label":`${I} ${C}`})))))}));m.displayName="BroadcastUfd"},354696:(e,t,a)=>{a.d(t,{uk:()=>n});const n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"broadcastLayout"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BroadcastLayout"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"teamsCallId"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"activeSectionId"}},{kind:"Field",name:{kind:"Name",value:"sections"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"broadcastSourceSection"}}]}}]}},...{kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"broadcastSourceSection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BroadcastSourceSection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"supportedStreamTypes"}},{kind:"Field",name:{kind:"Name",value:"source"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"broadcastSource"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"broadcastSource"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BroadcastSource"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isLocal"}},{kind:"Field",name:{kind:"Name",value:"participantMri"}},{kind:"Field",name:{kind:"Name",value:"type"}}]}}]}.definitions]}},942581:(e,t,a)=>{a.d(t,{k:()=>n});const n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"promoteAttendeeToPresenter"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"teamsCallId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"participantId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"promoteAttendeeToPresenter"},arguments:[{kind:"Argument",name:{kind:"Name",value:"teamsCallId"},value:{kind:"Variable",name:{kind:"Name",value:"teamsCallId"}}},{kind:"Argument",name:{kind:"Name",value:"participantId"},value:{kind:"Variable",name:{kind:"Name",value:"participantId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"state"}},{kind:"Field",name:{kind:"Name",value:"displayName"}},{kind:"Field",name:{kind:"Name",value:"meetingRole"}},{kind:"Field",name:{kind:"Name",value:"participantId"}}]}}]}}]}}}]);
//# sourceMappingURL=https://local.teams.office.com/sourcemaps/hashed-assets/broadcast-producer-screen-c8b88df7bd7ef9c5.js.mapAEo   T] 6     

GETOK"
accept-rangesbytes")
cache-controlpublic, max-age=29331268"
content-encodinggzip"
content-length17287"'
content-md5YYwcWALJpW/YG/7gytr98Q=="&
content-typeapplication/javascript"%
dateSun, 10 Apr 2022 11:14:04 GMT"
etag"0x8DA067B79A0F7D5"".
last-modifiedTue, 15 Mar 2022 12:01:01 GMT"6
server,Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0"#
x-CacheStorageCodeCacheHintnone"
x-ms-blob-type	BlockBlob"
x-ms-lease-state	available"
x-ms-lease-statusunlocked"7
x-ms-request-id$ec695bc9-701e-0000-088e-38950d000000"
x-ms-version
2014-02-140H P Zunknown` japplication/javascript7@iFx4}9@wG>AEo   L                                                                                                                                                                                                                                                                                                                                                                                                                                       pci\ven_1969&dev_1026&subsys_15051043&rev_b0 6   HWID pci\ven_1969&dev_1026&subsys_10261969&rev_f0 4   HWID pci\ven_1969&dev_1026&subsys_10261019&rev_b0 2   HWID pci\ven_1969&dev_1026&subsys_04591025&rev_b0 0   HWID pci\ven_1969&dev_1026&subsys_028d1025&rev_b0 .   HWID pci\ven_1969&dev_1026&subsys_022e1025&rev_b0 ,   HWID pci\ven_1969&dev_1026&subsys_021b1025&rev_b0 *   HWID pci\ven_1969&dev_1026&subsys_02151025&rev_b0 (   HWID pci\ven_1969&dev_1026&subsys_02131025&rev_b0 &   HWID pci\ven_1969&dev_1026&subsys_02111025&rev_b0 $   HWID pci\ven_1969&dev_1026&subsys_019d1025&rev_b0 "   HWID pci\ven_1969&dev_1026&subsys_01671025&rev_b0     HWID pci\ven_1969&dev_1026&subsys_015e1025&rev_b0    HWID pci\ven_1969&dev_1026&subsys_01461025&rev_b0    HWID pci\ven_1969&dev_1026&subsys_01451025&rev_b0    HWID pci\ven_1969&dev_1026&subsys_00be1b0a&rev_b0    HWID pci\ven_1969&dev_1026&subsys_00a51b0a&rev_b0    HWID pci\ven_1969&dev_1026&subsys_00871b0a&rev_b0    HWID pci\ven_1969&dev_1026&subsys_00681i"Q';wdv6QC-[2n)PDL >_|L 	&2rh	4hpRa@WGk'=0i	MzfB*	Ni^JG)ZY%;LdXl	[=Pw M xi^]$*V;V1sH#))b
6eds=L:|=be-^'p0s54"
70x6/J16T8|_q|K(};oneLuN3>XOj13vqqfx`Xc~K++/&/!;fsk1[4E:!]n,}H2SXY  I'3tM;L$iLFSxi/c2
9bfcy<3` /`42}/2pp9dcc13#7if}gph9:8xL#yDRS#[Jf=";mLNzaxCfL2svvzX`D'= T0Ay5=6\[;moGNG~x%Q_ L_N A9ph96\v~|3L8Y)(Ip?LvM9N^eS,8xL3?^q.>=~.v"i gMG:4GU5Sr-dBf'i#dRSN6 _bb~27H9={@G9S.rmDp11#Jv_7 ..Ah"2 LRk1L 	e~F 9{.aIG/A[1^W$'/Dv~L q\#1=r* <ZG;~^vUo3 Kio(N?.$EM<4O)x=eoo1>o
9yy~K)>D358Gw ?J>jhqu+[Y^c6A.{LF#dyFbK~7tET$IC;Xm{uF@ X36~3o> |rX?-ZGa$P|-dRnRrMhw4k2$R"MOpul?Q"AJ(=g~@QcXb!8;K/,]R,
	EO6~S1;vG!t7X#f3Qc, b yUn}fF1<hN9xT6c[RS-6^=mZk83H7ZOoo?W![XS\&F2+ULc "H'4NNT3jJ{6xE9VqE-?Rd~)+."Gv6|c+y~8"&dbgompxO"rf=}&cxxbH|{o>O1&b~1fw'XL "=H{zLoM]C?<}{oSebm)_E4G_=}>?R,8>V	(Bcmw+SY6
bkY"M\V;A`	w)xv;p<rIfghy|t`-VQ]f}7F ZM9xLv"	t~ybBYQtAGn"}{^iqc< Mo#AsE/Uv5f
M{9wY)1R&d818I		me{mo+uY!T)1%1k #C1\_~KxM0~AC,rD{~#i$X#JUd25|V
WIde/$1C>\-=3jFQ]Qc"+fqjLpQ11q65zbeFR&&cn@N9U\cXS~rDS33?9x#8|bCIy TuD@|X,CG`lY(E_i2sH;LFu>eWX^c \]- b5 dYkKM6u6!pc-p=;g3%m;Xw6$PEZb&0xx)[(g #R=O eO C^h"`j5j.e"8I+c>G.)	o1[V]g$>!QTu+DaBb(b'Of^;zfkP6sL~/yvimXm\YNX@tTS"UgIo_d~33;  S~NoR~{}	$b133(]7pLLl]~Q":}A>"&6?= b`vO\W
t|?W?g}|}im _^) ?JIm31<4@G;FwgIYAR -i.R>'xlh=]kRivp$fc#IfgfgG3;m>m?9mi^ g4Du'	NoSM("LO&x	]8#yw ":}A>}z;ndp(=~7t_$O}(wI}bfv;3p))}xe39v?vINoPRSD yo=>s&}>	")F|}#$O) ?Ja"fw>T<0w>.,\f+q\9hB>w"3'43?]bwrO66| e3h?Y'
?cRS3>#n+}F-!mo~o-f'i>q=> IMF#PT4 Ri7._Mm{GO+)33'm{j81GenEy.BptG363@'~$iFS {}b88=8k}W0MTs/}?3zn<Ur`D11=6MMgf#i14x p* W|H&GnX'T8o?I&)fygmM;}%=Sffg$86x4M.*0)4Dn&2]Ex\7>'lNc2`fOy)DVTdcWyZRN3Fc~4:Kk24ZTzv`vqaRYI bdL\
Xe;CNf	v(b&69w1/izUnmxEX((y){Bs=1Ff7;8b"?uD*G>4hlLe;.Xc1Y
m3Y|w;\$G2dLVitkY~z#;we1xQV7m5aGCk,qMLUNK}8%2G"w"|FGlkB(4$."`T ~\&5v;	K1;EgG>>\2f?fXoH}{|C-9RFbg`M)e3su,u 	<{{?O;/\ ; -[3x!qwOn	RE-'~Zzw9gO@F 4J9l,LuQ9eyd}UT
=rLcc3msilHzcKO6?M{:'CAx!tfvR];
dF{Lh2f'K+j ycOMmC`f&gmE5)FlqI fU6;vlf\fNd6w#n- qm p|Rbu_p&XVd<5)jg(2#v ;N'SKGgmw1F9EL;p8*X:Ccmki#m}vim386F^M..fZ5,Nh~PfI1JUYZ%{mlVV`S:A5ILNfCAPERQN+N}nn;3Dy6nf!PSVKI2s8Y/c+_gsBf2YYvZog ?(__^=Z5b`
?,I1}g[C8W1GGQ{#h Q_$>}pr (r (F8q5wM{<4 {v\T?>}cw+\z^mwxy7~1%13=?q`O;%3gG	vyOn	zq_N_^DI@GFgyO S8; 	9w$QxD#7 ><1=gNc|Nc|'r'CpFxIw $^O:ssN; vrtD1n}8O^v?"&Nc|Nc|fJffw~w(x}>*&kC@y&2;<#-M11;Noo,D ^"vOI " ]qrL9(}i}3i=d}f}#~-'N|<:t'N|<:tdb'}]m>
^Opgy8>s}8>'$3JP	9s5?v vrG=Sd9Ig;Ibh2o$ _^^L?HKmD}Ncf9g>=}n+I=}OlfmOo}xLmn)$w~(@`p$T_TLxaghH e<3>b{wx=&S=e'<<:"G&7iY#<xmoO Qvn	\iT_r|p1mq\Hf::E)-xLO"gnq\D?Zw%Lq{eH<Hy+<9H\5%3;mwQ?tq\W	"p eJGg:QEE2"S q\$ 0H\5G'o+pH\"'i"dgx+nH>p$q{e"=d3L<W3s)yGLN	"d	yJ\W1yDDm}WTq{e#3s('?qp<xuq{e.C ?<xuG{q\#3s)yUq\W\Gg:W3q\#3s)yUg+y<W8=2[+yH\+Gg:R8=2kJF6of}fg2f/~8=2'L"x+ZQ#3("))gq\KQ#3s*ILv >+<xuxmS;|Gg:R8=2gw"am;m \W\Gg:SG2#3G'13"8?<"cx++b@l^q{e
oNpbycLD.+ND<xuo;|h~Wxr2)mc+D Gg:PL?`+9wrR8?;R#%{Gz\W	~8=2wq\$